<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:p="http://primefaces.org/ui"
>
  <h:head>
    <title>Lab 3: Decart area</title>
    <link
      rel="shortcut icon"
      href="./resources/media/favicon.ico"
      type="image/x-icon"
    />
    <h:outputStylesheet library="css" name="main.css" />
  </h:head>
  <f:view>
    <h:body class="barbie-mode">
      <h:outputScript library="js" name="client.js" />
      <h:link outcome="index" value="Go back to clock" styleClass="linking" />
      <p class="mode" onclick="pic(1)" id="barbie-mode">Barbie mode on</p>
      <p class="mode covered" onclick="pic(2)" id="openheimer-mode">
        Oppenheimer mode on
      </p>
      <p id = "errorrr" style="display: none;">Please select only one R value</p>
      <div class="main-container">
        <div class="form_container">
          <h:form id = "form-rend" styleClass="input-form">
            <p:remoteCommand name="executeAddPoint" actionListener="#{dotBean.executeAddPoint}" update="table-results form-rend">
            </p:remoteCommand>
            <p:remoteCommand name="changeRadius" actionListener="#{dotBean.changeRadius}" update="form-rend">
            </p:remoteCommand>
            <p>
              <ui:fragment rendered="#{not empty dotBean.last}">
              <svg xmlns="http://www.w3.org/2000/svg" id="svg" onclick="handleClick(event)">
                <line x1="0" y1="150" x2="300" y2="150" stroke="#000720"/>
                <line x1="150" y1="0" x2="150" y2="300" stroke="#000720"/>
                <polygon
                  points="300,150 295,155 295, 145"
                  fill="#000720"
                  stroke="#000720"
                />
                <polygon
                  points="150,0 145,5 155,5"
                  fill="#000720"
                  stroke="#000720"
                />
                <text x="282" y="170">x</text>
                <text x="163" y="14">y</text>
                <line
                  x1="270"
                  y1="148"
                  x2="270"
                  y2="152"
                  stroke="#000720"
                />
                <text x="265" y="140">
                  <tspan class="graph_value">R</tspan>
                </text>
                <line
                  x1="210"
                  y1="148"
                  x2="210"
                  y2="152"
                  stroke="#000720"
                />
                <text x="200" y="140">
                  <tspan class="graph_value">R</tspan>
                  /2
                </text>
                <line x1="90" y1="148" x2="90" y2="152" stroke="#000720"/>
                <text x="75" y="140">
                  -
                  <tspan class="graph_value">R</tspan>
                  /2
                </text>
                <line x1="30" y1="148" x2="30" y2="152" stroke="#000720"/>
                <text x="20" y="140">
                  -
                  <tspan class="graph_value">R</tspan>
                </text>
                <line x1="148" y1="30" x2="152" y2="30" stroke="#000720"/>
                <text x="156" y="35">
                  <tspan class="graph_value">R</tspan>
                </text>
                <line x1="148" y1="90" x2="152" y2="90" stroke="#000720"/>
                <text x="156" y="95">
                  <tspan class="graph_value">R</tspan>
                  /2
                </text>
                <line
                  x1="148"
                  y1="210"
                  x2="152"
                  y2="210"
                  stroke="#000720"
                />
                <text x="156" y="215">
                  -
                  <tspan class="graph_value">R</tspan>
                  /2
                </text>
                <line
                  x1="148"
                  y1="270"
                  x2="152"
                  y2="270"
                  stroke="#000720"
                />
                <text x="156" y="275">
                  -
                  <tspan class="graph_value">R</tspan>
                </text>
                <polygon
                  points="300,150 295,155 295, 145"
                  fill="#000720"
                  stroke="#000720"
                />
                <polygon
                  points="150,0 145,5 155,5"
                  fill="#000720"
                  stroke="#000720"
                />
                <rect
                  x="150"
                  y="150"
                  width="120"
                  height="120"
                  fill-opacity="0.4"
                  stroke="navy"
                  fill="blue"
                />
                <polygon
                  points="30,150 150,150 150,270"
                  fill-opacity="0.4"
                  stroke="navy"
                  fill="blue"
                />
                <path
                  d="M150 150 L30 150 A120 120 0 0 1 150 30 Z"
                  fill-opacity="0.4"
                  stroke="navy"
                  fill="blue"
                />
                <circle cx="#{dotBean.last.x}" cy="#{dotBean.last.y}" r="3" fill="#{dotBean.resultInColor(dotBean.last.result)}" />
              </svg>
              </ui:fragment>
            </p>
            <div class="input-argument-container">
              <label class="input-argument">X:</label>
              <div class="links-x">
                <h:commandLink
                  value="-2"
                  action="#{dotBean.setXtoM2()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="-1.5"
                  action="#{dotBean.setXtoM15()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="-1"
                  action="#{dotBean.setXtoM1()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="-0.5"
                  action="#{dotBean.setXtoM05()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="0"
                  action="#{dotBean.setXto0()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="0.5"
                  action="#{dotBean.setXto05()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="1"
                  action="#{dotBean.setXto1()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
                <h:commandLink
                  value="1.5"
                  action="#{dotBean.setXto15()}"
                  styleClass="linking"
                >
                  <f:ajax execute="@this" render="@none" />
                </h:commandLink>
              </div>
            </div>
            <div class="input-argument-container">
              <label class="input-argument">Y:</label>
              <h:inputText
                id="yInput"
                value="#{dotBean.current.y}"
                styleClass="text-input"
              >
                <f:validator validatorId="y-valid" />
              </h:inputText>
              <h:message for="yInput" styleClass="error-message" />
            </div>
            <div class="input-argument-container">
              <label class="input-argument">R:</label
              ><label>
                <h:selectBooleanCheckbox
                  value="#{dotBean.setRto1}"
                  styleClass="input-radio"
                  onclick="changeR(1)"
                >
                </h:selectBooleanCheckbox>
                
                1
              </label>
              <label>
                <h:selectBooleanCheckbox
                  value="#{dotBean.setRto15}"
                  styleClass="input-radio"
                  onclick="changeR(1.5)"
                >
                </h:selectBooleanCheckbox>
                
                1.5
              </label>
              <label>
                <h:selectBooleanCheckbox
                  value="#{dotBean.setRto2}"
                  styleClass="input-radio"
                  onclick="changeR(2)"
                >
                </h:selectBooleanCheckbox>
                
                2
              </label>
              <label>
                <h:selectBooleanCheckbox
                  value="#{dotBean.setRto25}"
                  styleClass="input-radio"
                  onclick="changeR(2.5)"
                >
                </h:selectBooleanCheckbox>
                2.5
              </label>
              <label>
                <h:selectBooleanCheckbox
                  value="#{dotBean.setRto3}"
                  styleClass="input-radio"
                  onclick="changeR(3)"
                >
                </h:selectBooleanCheckbox>
                3
              </label>
              <h:commandButton
                value="Send It!"
                styleClass="form-button"
                action="#{dotBean.addDot()}"
              >
                <f:ajax execute="@form" render="table-results form-rend"/>
              </h:commandButton>
            </div>
          </h:form>
        </div>
      </div>

        <div class="table-container">
          <h:dataTable
            id="table-results"
            value="#{dotBean.dotsDB.dots}"
            var="dot"
            styleClass="table"
          >
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="argument-column" value="X" />
              </f:facet>
              <h:outputText value="#{dot.x}" />
            </h:column>
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="argument-column" value="Y" />
              </f:facet>
              <h:outputText value="#{dot.y}" />
            </h:column>
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="argument-column" value="R" />
              </f:facet>
              <h:outputText value="#{dot.r}" />
            </h:column>
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="result-column" value="Result" />
              </f:facet>
              <h:outputText value="#{dotBean.resultInWords(dot.result)}" />
            </h:column>
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="time-column" value="Received" />
              </f:facet>
              <h:outputText value="#{dot.receivedAt}">
                <f:convertDateTime
                  pattern="yyyy-MM-dd HH:mm:ss"
                  timeZone="yourTimeZone"
                />
              </h:outputText>
            </h:column>
            <h:column>
              <f:facet name="header">
                <h:outputText styleClass="time-column" value="In work, ns" />
              </f:facet>
              <h:outputText value="#{dot.responseTime}" />
            </h:column>
          </h:dataTable>
      </div>
      <h:outputScript library="js" name="dots.js" />
    </h:body>
  </f:view>
</html>
